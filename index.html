<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Cloaked Entry Fullscreen</title>
<style>
  body {
    display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; font-family: Arial, sans-serif;
    background: #0d0d0d; color: white;
  }

  #cloakBtn {
    padding: 20px; font-size: 1.5em; cursor: pointer; background: black; color: white; border: none; border-radius: 12px;
    transition: 0.2s;
  }
  #cloakBtn:hover { opacity: 0.85; transform: scale(1.03); }
  #cloakBtn:active { transform: scale(0.98); }

  .box {
    display: none;
    background: #1a1a1a;
    padding: 30px;
    border-radius: 12px;
    width: 300px;
    text-align: center;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
    border: 1px solid #333;
  }

  input {
    width: 90%;
    padding: 12px;
    margin-top: 10px;
    border-radius: 8px;
    border: none;
    background: #333;
    color: white;
    font-size: 16px;
    outline: none;
  }

  button.submitBtn {
    margin-top: 15px;
    padding: 12px 20px;
    width: 100%;
    background: #4caf50;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    transition: 0.2s;
  }

  button.submitBtn:hover { background: #43a047; }
  #msg { margin-top: 10px; color: #ff5252; font-size: 14px; }
</style>
</head>
<body>

<button id="cloakBtn">CLOAK</button>

<div class="box" id="passwordBox">
  <h2>Enter Password</h2>
  <input id="pass" type="password" />
  <button class="submitBtn" id="enterBtn">Enter</button>
  <p id="msg"></p>
</div>

<script>
const PASSWORD = "ᎤᏇᏕ1Ꮭ0ᎧᏰᎧᎥᏬᎩᏖᏒᎴ";

const cloakBtn = document.getElementById('cloakBtn');
const passwordBox = document.getElementById('passwordBox');
const enterBtn = document.getElementById('enterBtn');

// Function to go fullscreen
async function goFullscreen() {
    const elem = document.documentElement;
    if (elem.requestFullscreen) {
        await elem.requestFullscreen();
    } else if (elem.webkitRequestFullscreen) {
        await elem.webkitRequestFullscreen();
    } else if (elem.msRequestFullscreen) {
        await elem.msRequestFullscreen();
    }
}

// Auto-close if fullscreen is exited
function handleFullscreenChange() {
    const isFullscreen = document.fullscreenElement || document.webkitFullscreenElement || document.msFullscreenElement;
    if (!isFullscreen) {
        window.close(); // Close tab if fullscreen exits
    }
}

// Show password box and hide cloak button after fullscreen
cloakBtn.addEventListener('click', async () => {
    await goFullscreen();
    cloakBtn.style.display = 'none';
    passwordBox.style.display = 'block';
});

// Handle password submit
enterBtn.addEventListener('click', () => {
    const entered = document.getElementById('pass').value;
    if (entered !== PASSWORD) {
        document.getElementById('msg').innerText = "Wrong password";
        return;
    }
    // Correct password → go to home.html in the same tab
    window.location.href = "/home.html";
});

// Fullscreen exit listeners
document.addEventListener('fullscreenchange', handleFullscreenChange);
document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
document.addEventListener('MSFullscreenChange', handleFullscreenChange);
</script>

</body>
</html>
