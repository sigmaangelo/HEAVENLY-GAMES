<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
/* Your original styles, include all your previous CSS here */

/* Overlay styles for game popup */
#gameOverlay {
    position: fixed;
    top:0; left:0;
    width: 100vw;
    height: 100vh;
    background: rgba(0,0,0,0.95);
    display: none; /* Hidden initially */
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    z-index: 999;
}

#gameControls {
    display: none; /* Will hide controls here, since now buttons are outside */
}

#gameFrame {
    width: 90%;
    height: calc(100% - 60px);
    border: none;
    margin-top: 10px;
    border-radius: 8px;
}

/* Cloak overlay styles */
#cloakOverlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background-color: black;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
}

/* Style for the cloak button */
#cloakButton {
  padding: 30px 60px;
  font-size: 2em;
  border-radius: 12px;
  border: none;
  background: #222;
  color: white;
  cursor: pointer;
  box-shadow: 0 0 20px rgba(255,255,255,0.5);
  transition: all 0.3s ease;
}
#cloakButton:hover {
  background: #444;
}

/* Buttons below the game grid */
#bottomButtons {
  display: flex;
  justify-content: center;
  margin: 10px 0;
  gap: 20px;
}

/* Style for these buttons */
#bottomButtons button {
  font-size: 1.2em;
  padding: 10px 20px;
  border-radius: 8px;
  border: 2px solid #00ffc8;
  background: #1a1f29;
  color: #00ffc8;
  cursor: pointer;
  transition: 0.25s;
}
#bottomButtons button:hover {
  background: #00ffc8;
  color: black;
  transform: scale(1.05);
}
</style>
</head>
<body>

<!-- Cloak overlay with centered button -->
<div id="cloakOverlay">
  <button id="cloakButton">Enter Game</button>
</div>

<!-- Your existing game overlay (without controls inside) -->
<div id="gameOverlay" style="display:none;">
    <iframe id="gameFrame" src=""></iframe>
</div>

<!-- Search and header -->
<header>
    <h1>SNOWY UPDATE! Heavenly Games!</h1>
    <br>
  <h2> PRESS THE ` KEY TO EXIT THE GAME YOU'RE PLAYING</h2>
<br>
    <input type="text" id="searchBar" placeholder="Search games...">
</header>

<!-- Game cards -->
<div class="game-grid">
<!-- Your game cards here (unchanged) -->
<!-- ... (long list of game cards) ... -->
</div>

<!-- Buttons below the game grid -->
<div id="bottomButtons">
  <button id="backBtn">⬅ Back</button>
  <button id="fullscreenBtn">⛶ Fullscreen</button>
</div>

<!-- Snow effect -->
<div class="snow"></div>

<!-- Footer -->
<footer>© 2026 Snowy Update — All Rights Reserved</footer>

<script>
const overlay = document.getElementById("gameOverlay");
const iframe = document.getElementById("gameFrame");
const backBtn = document.getElementById("backBtn");
const fullscreenBtn = document.getElementById("fullscreenBtn");
const cloakOverlay = document.getElementById("cloakOverlay");
const cloakButton = document.getElementById("cloakButton");

// Make overlay focusable so keyboard works
overlay.tabIndex = -1;

// When clicking the cloak button
cloakButton.onclick = () => {
  // Request fullscreen
  const el = document.documentElement;
  if (el.requestFullscreen) el.requestFullscreen();
  else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
  else if (el.msRequestFullscreen) el.msRequestFullscreen();

  // Hide cloak overlay
  cloakOverlay.style.display = "none";

  // Show game overlay
  document.getElementById("gameOverlay").style.display = "block";

  // Focus overlay to capture keys
  overlay.focus();
};

// Back button handler
backBtn.onclick = () => {
    iframe.src = "";
    document.getElementById("gameOverlay").style.display = "none";
    document.body.style.overflow = "";
};
// Fullscreen button handler
fullscreenBtn.onclick = () => {
    if (document.fullscreenElement) {
      document.exitFullscreen();
    } else {
      const el = document.documentElement;
      if (el.requestFullscreen) el.requestFullscreen();
      else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
      else if (el.msRequestFullscreen) el.msRequestFullscreen();
    }
    overlay.focus();
};

// Search functionality
const searchInput = document.getElementById("searchBar");
searchInput.addEventListener("keyup", function () {
    const value = this.value.toLowerCase();
    document.querySelectorAll(".game-card").forEach(game => {
        game.style.display = game.textContent.toLowerCase().includes(value)
            ? "block"
            : "none";
    });
});

// Snow effect
const snow = document.createElement("div");
snow.className = "snow";
function makeSnowflake() {
    const dot = document.createElement("span");
    dot.style.left = Math.random()*100 + "vw";
    dot.style.width = dot.style.height = 2 + Math.random()*6 + "px";
    dot.style.opacity = 0.3 + Math.random()*0.7;
    dot.style.animationDuration = 3 + Math.random()*5 + "s";
    snow.appendChild(dot);
    setTimeout(makeSnowflake, 100);
}
makeSnowflake();
document.body.appendChild(snow);

// Optional: handle ESC key to exit fullscreen
window.addEventListener("keydown", (e) => {
  if (e.key === "`" && document.fullscreenElement) {
    document.exitFullscreen();
  }
});
</script>
</body>
</html>
